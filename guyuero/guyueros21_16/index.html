<!DOCTYPE html>
<html>
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>[Notes16]Parameters - 云居小栈</title>
<meta name="description" content=" 更新时间： 2020年07月21日酉时 ">
<meta name="generator" content="Hugo 0.73.0" />
<link href="https://894276610.github.io//index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://894276610.github.io/guyuero/guyueros21_16/">
<link rel="stylesheet" href="https://894276610.github.io/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://894276610.github.io/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://894276610.github.io/js/bundle.js"></script><style>
:root {}
</style>
<meta property="og:title" content="[Notes16]Parameters" />
<meta property="og:description" content="第十六讲 参数的使用与编程方法 参数模型 Ros Master
 Parameter Server (全局字典)  /robot_name:&ldquo;my_robot&rdquo; /robot_radius:0.4 /robot_height:0.5    参数模型使用方法  创建功能包(第10、13讲也有类似步骤)  cd ~/catkin_ws/src catkin_crete_pkg learning_parameter roscpp rospy std_srvs 参数命令行使用   yaml 参数文件  background_b:255 background_g:86 background_r:69 rosdistro:&#39;melodic&#39; roslaunch: uris:{host_hcx_vpc__43763:&#39;http://hcx-vpc:43763/&#39;} rosversion:&#39;1.14.3&#39; run_id:........  列出当前所有参数
rosparam list 显示某个参数值 rosparam get param_key 设置某个参数值
rosparam set param_key param_value 保存参数到文件
rosparam dump file_name 从文件读取参数 rosparam load file_name 删除参数
rosparam delete param_key  小海龟例：
roscore rosrun turtlesim turtlesim_node rosparam list rosparam get /background_b rosparam get /background_g rosparam get /rosdistro rosparam get /rosversion rosparam set /background_b 100 请求服务之后才会更改背景值" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://894276610.github.io/guyuero/guyueros21_16/" />
<meta property="article:published_time" content="2020-07-20T15:40:13+08:00" />
<meta property="article:modified_time" content="2020-07-20T15:40:13+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Notes16]Parameters"/>
<meta name="twitter:description" content="第十六讲 参数的使用与编程方法 参数模型 Ros Master
 Parameter Server (全局字典)  /robot_name:&ldquo;my_robot&rdquo; /robot_radius:0.4 /robot_height:0.5    参数模型使用方法  创建功能包(第10、13讲也有类似步骤)  cd ~/catkin_ws/src catkin_crete_pkg learning_parameter roscpp rospy std_srvs 参数命令行使用   yaml 参数文件  background_b:255 background_g:86 background_r:69 rosdistro:&#39;melodic&#39; roslaunch: uris:{host_hcx_vpc__43763:&#39;http://hcx-vpc:43763/&#39;} rosversion:&#39;1.14.3&#39; run_id:........  列出当前所有参数
rosparam list 显示某个参数值 rosparam get param_key 设置某个参数值
rosparam set param_key param_value 保存参数到文件
rosparam dump file_name 从文件读取参数 rosparam load file_name 删除参数
rosparam delete param_key  小海龟例：
roscore rosrun turtlesim turtlesim_node rosparam list rosparam get /background_b rosparam get /background_g rosparam get /rosdistro rosparam get /rosversion rosparam set /background_b 100 请求服务之后才会更改背景值"/>
<meta itemprop="name" content="[Notes16]Parameters">
<meta itemprop="description" content="第十六讲 参数的使用与编程方法 参数模型 Ros Master
 Parameter Server (全局字典)  /robot_name:&ldquo;my_robot&rdquo; /robot_radius:0.4 /robot_height:0.5    参数模型使用方法  创建功能包(第10、13讲也有类似步骤)  cd ~/catkin_ws/src catkin_crete_pkg learning_parameter roscpp rospy std_srvs 参数命令行使用   yaml 参数文件  background_b:255 background_g:86 background_r:69 rosdistro:&#39;melodic&#39; roslaunch: uris:{host_hcx_vpc__43763:&#39;http://hcx-vpc:43763/&#39;} rosversion:&#39;1.14.3&#39; run_id:........  列出当前所有参数
rosparam list 显示某个参数值 rosparam get param_key 设置某个参数值
rosparam set param_key param_value 保存参数到文件
rosparam dump file_name 从文件读取参数 rosparam load file_name 删除参数
rosparam delete param_key  小海龟例：
roscore rosrun turtlesim turtlesim_node rosparam list rosparam get /background_b rosparam get /background_g rosparam get /rosdistro rosparam get /rosversion rosparam set /background_b 100 请求服务之后才会更改背景值">
<meta itemprop="datePublished" content="2020-07-20T15:40:13&#43;08:00" />
<meta itemprop="dateModified" content="2020-07-20T15:40:13&#43;08:00" />
<meta itemprop="wordCount" content="202">



<meta itemprop="keywords" content="Ros,入门," /></head>
<body><div class="container"><header>
<h1>云居小栈</h1>
<a href="https://github.com/894276610/894276610.github.io" class="github"><i class="fab fa-github"></i></a>
<p class="description"> 更新时间： 2020年07月21日酉时 </p>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/todo/">My Todo List</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>[Notes16]Parameters</h1>
<h1 id="第十六讲-参数的使用与编程方法">第十六讲 参数的使用与编程方法</h1>
<h2 id="参数模型">参数模型</h2>
<p>Ros Master</p>
<ul>
<li>Parameter Server (全局字典)
<ul>
<li>/robot_name:&ldquo;my_robot&rdquo;</li>
<li>/robot_radius:0.4</li>
<li>/robot_height:0.5</li>
</ul>
</li>
</ul>
<h2 id="参数模型使用方法">参数模型使用方法</h2>
<ol>
<li>创建功能包(第10、13讲也有类似步骤)</li>
</ol>
<pre><code>cd ~/catkin_ws/src  
catkin_crete_pkg learning_parameter roscpp rospy std_srvs
</code></pre><ol start="2">
<li>参数命令行使用</li>
</ol>
<ul>
<li>yaml 参数文件</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">background_b:<span style="color:#ae81ff">255</span>  
background_g:<span style="color:#ae81ff">86</span>  
background_r:<span style="color:#ae81ff">69</span>  
rosdistro:<span style="color:#e6db74">&#39;melodic&#39;</span>  
<span style="color:#66d9ef">roslaunch</span>:  
   uris:{host_hcx_vpc__43763:<span style="color:#e6db74">&#39;http://hcx-vpc:43763/&#39;</span>}
rosversion:<span style="color:#e6db74">&#39;1.14.3&#39;</span>  
run_id:........
</code></pre></div><ul>
<li>列出当前所有参数<br>
<code>rosparam list</code></li>
<li>显示某个参数值
<code>rosparam get param_key</code></li>
<li>设置某个参数值<br>
<code>rosparam set param_key param_value</code></li>
<li>保存参数到文件<br>
<code>rosparam dump file_name</code></li>
<li>从文件读取参数
<code>rosparam load file_name</code></li>
<li>删除参数<br>
<code>rosparam delete param_key</code></li>
</ul>
<p>小海龟例：</p>
<pre><code>roscore
rosrun turtlesim turtlesim_node  
rosparam list  

rosparam get /background_b  
rosparam get /background_g  
rosparam get /rosdistro  
rosparam get /rosversion
rosparam set /background_b 100  
</code></pre><p>请求服务之后才会更改背景值</p>
<pre><code>rosservice call /clear &quot;{}&quot;  

rosparam dump param.yaml  
rosparam load param.yaml  

</code></pre><h2 id="编程方法-c">编程方法 （C++）</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * 该例程设置/读取海龟例程中的参数
</span><span style="color:#75715e"> */</span>
<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ros/ros.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;std_srvs/Empty.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">**</span>argv)
{
	<span style="color:#66d9ef">int</span> red, green, blue;

    <span style="color:#75715e">// ROS节点初始化
</span><span style="color:#75715e"></span>    ros<span style="color:#f92672">::</span>init(argc, argv, <span style="color:#e6db74">&#34;parameter_config&#34;</span>);

    <span style="color:#75715e">// 创建节点句柄
</span><span style="color:#75715e"></span>    ros<span style="color:#f92672">::</span>NodeHandle node;

    <span style="color:#75715e">// 读取背景颜色参数
</span><span style="color:#75715e"></span>	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_r&#34;</span>, red);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_g&#34;</span>, green);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_b&#34;</span>, blue);

	ROS_INFO(<span style="color:#e6db74">&#34;Get Backgroud Color[%d, %d, %d]&#34;</span>, red, green, blue);

	<span style="color:#75715e">// 设置背景颜色参数
</span><span style="color:#75715e"></span>	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>set(<span style="color:#e6db74">&#34;/background_r&#34;</span>, <span style="color:#ae81ff">255</span>);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>set(<span style="color:#e6db74">&#34;/background_g&#34;</span>, <span style="color:#ae81ff">255</span>);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>set(<span style="color:#e6db74">&#34;/background_b&#34;</span>, <span style="color:#ae81ff">255</span>);

	ROS_INFO(<span style="color:#e6db74">&#34;Set Backgroud Color[255, 255, 255]&#34;</span>);

    <span style="color:#75715e">// 读取背景颜色参数
</span><span style="color:#75715e"></span>	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_r&#34;</span>, red);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_g&#34;</span>, green);
	ros<span style="color:#f92672">::</span>param<span style="color:#f92672">::</span>get(<span style="color:#e6db74">&#34;/background_b&#34;</span>, blue);

	ROS_INFO(<span style="color:#e6db74">&#34;Re-get Backgroud Color[%d, %d, %d]&#34;</span>, red, green, blue);

	<span style="color:#75715e">// 调用服务，刷新背景颜色
</span><span style="color:#75715e"></span>	ros<span style="color:#f92672">::</span>service<span style="color:#f92672">::</span>waitForService(<span style="color:#e6db74">&#34;/clear&#34;</span>);
	ros<span style="color:#f92672">::</span>ServiceClient clear_background <span style="color:#f92672">=</span> node.serviceClient<span style="color:#f92672">&lt;</span>std_srvs<span style="color:#f92672">::</span>Empty<span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;/clear&#34;</span>);
	std_srvs<span style="color:#f92672">::</span>Empty srv;
	clear_background.call(srv);
	
	sleep(<span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><h2 id="程序的编译规则">程序的编译规则</h2>
<p>CMakeList.txt  ##build##</p>
<ul>
<li>设置需要编译的代码和生成的可执行文件</li>
<li>设置链接库</li>
</ul>
<pre><code>add_executable(parameter_config src/parameter_config.cpp)  
target_link_libraries(parameter_config ${catkin_LIBRARIES})
</code></pre><h2 id="编译运行">编译运行</h2>
<pre><code>cd ~/catkin_ws  
catkin_make  
source devel/setup.bash  
roscore  
rosrun turtlesim turtlesim_node  
rosrun learning_parameter parameter_config  

</code></pre><p>参考资料<br>
[1]<a href="https://www.bilibili.com/video/BV1zt411G7Vn?p=16">古月ROS入门21讲——第十六讲</a><br>
[2]<a href="http://wiki.ros.org/Parameter%20Server">设置参数详细信息</a></p>
<div class="edit-meta">
Last updated on 20 Jul 2020


<br>
Published on 20 Jul 2020
<br><a href="https://github.com/894276610/894276610.github.io/edit/master/content/GuYueRo%5c%c2%96GuYueRos21_16.md" class="edit-page"><i class="fas fa-pen-square"></i> Edit on GitHub</a></div><nav class="pagination"><a class="nav nav-prev" href="https://894276610.github.io/guyuero/guyueros21_17/" title="[Notes17]Transformation"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - [Notes17]Transformation</a>
<a class="nav nav-next" href="https://894276610.github.io/guyuero/guyueros21_15/" title="[Notes15]define service">Next - [Notes15]define service <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://894276610.github.io/">Home</a></li>

<li class=" has-sub-menu"><a href="https://894276610.github.io/studycpp/">StudyCpps<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://894276610.github.io/studycpp/houjie/houjiecpp_02/">[Cpp] P6-P8 </a></li>
<li class=""><a href="https://894276610.github.io/studycpp/houjie/houjiecpp_03/">[Cpp] P9 </a></li>
<li class=""><a href="https://894276610.github.io/studycpp/houjie/houjiecpp_01/">[Cpp] P1-P5 complex </a></li>
<li class=""><a href="https://894276610.github.io/studycpp/book01/">[Cpp]Book_List</a></li>
<li class=""><a href="https://894276610.github.io/studycpp/details/">[Cpp]琐碎细节-待续</a></li>
<li class=""><a href="https://894276610.github.io/studycpp/overload_operator/">[Cpp]Overload_operator</a></li>
</ul>
  
</li>

<li class="parent has-sub-menu"><a href="https://894276610.github.io/guyuero/">GuYueRos<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_21/">[Notes21]Summary</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_20/">[Notes20]Visual aids</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_19/">[Notes19]launch file</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_18/">[Notes18]Broadcaster and listener</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_17/">[Notes17]Transformation</a></li>
<li class="active"><a href="https://894276610.github.io/guyuero/guyueros21_16/">[Notes16]Parameters</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_15/">[Notes15]define service</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_14/">[Notes14]Server</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_13/">[Notes13]Client</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_12&#43;/">[Note12&#43;]Topic_define</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_12/">[Notes12]Topic define</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_11/">[Notes11]Subscriber</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_10/">[Notes]古月ROS_10</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_09/">[Notes9]Workspace and package</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/ros_install_tips/">[Code]Ros系统安装步骤</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_08/">[Notes8]Ros Command Line</a></li>
<li class=""><a href="https://894276610.github.io/guyuero/guyueros21_07/">[Notes7]Ros Concept</a></li>
</ul>
  
</li>



<li class=" has-sub-menu"><a href="https://894276610.github.io/extrathing/">ExtraThings<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://894276610.github.io/extrathing/titlephoto/">[花絮]头像制作思路</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://894276610.github.io/createblog/">CreateBlogs<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://894276610.github.io/createblog/markdownlanguage/">Markdown_basic</a></li>
<li class=""><a href="https://894276610.github.io/createblog/hugo_try/">HUGO</a></li>
<li class=""><a href="https://894276610.github.io/createblog/firstblog/">Bolg</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://894276610.github.io/introduction_to_robotics/">Introduction_to_robotics<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://894276610.github.io/introduction_to_robotics/introduction/">[Robotics]Books</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
